import{_ as g,o as l,c as y,r as b,d as w,a as $,b as h,w as m,e as r,f,t as p,F as C,g as S,h as k,B as v,i as I,p as F,j as L,u as N,s as V,k as E,l as P,m as G,n as j,q as T,D as q,v as x,x as A,y as U}from"./index-ClXHnYI3.js";const z={},H={class:"tag caption"};function J(e,t){return l(),y("span",H,[b(e.$slots,"default",{},void 0)])}const K=g(z,[["render",J],["__scopeId","data-v-4d9c172c"]]),M=e=>(F("data-v-2ffcd12b"),e=e(),L(),e),O=["src","alt"],Q={class:"card__content"},W={class:"card__title"},X={class:"card__id h4"},Y={class:"card__types"},Z=M(()=>r("h3",{class:"card__types-title h4"},"Types",-1)),R={class:"card__types-tags"},ee={class:"card__actions"},te=["src"],ae=w({__name:"CardTeam",props:{id:{},name:{},image:{},types:{},stats:{},cries:{}},emits:["click-sound","click-delete"],setup(e,{emit:t}){const c=t,o=$();function d(){c("click-sound",o)}function u({id:a,name:i}){c("click-delete",{id:a,name:i})}return(a,i)=>(l(),h(I,{class:"card"},{default:m(()=>[r("img",{class:"card__image",src:a.image,alt:`Pokemon ${a.name} image`},null,8,O),r("div",Q,[r("h2",W,[f(p(a.name)+" ",1),r("span",X,"#"+p(a.id),1)]),r("div",Y,[Z,r("div",R,[(l(!0),y(C,null,S(a.types,s=>(l(),h(K,{class:"card__types-tag caption",key:s},{default:m(()=>[f(p(s),1)]),_:2},1024))),128))])])]),r("div",ee,[r("audio",{ref_key:"audioRef",ref:o,src:a.cries.latest},null,8,te),k(v,{class:"card__sound",onClick:d},{default:m(()=>[f("Sound")]),_:1}),k(v,{class:"card__sound",background:"hsla(2, 100%, 64%, 0.09)",color:"var(--light-text)",onClick:i[0]||(i[0]=s=>u({id:a.id,name:a.name}))},{default:m(()=>[f(" Delete ")]),_:1})])]),_:1}))}}),se=g(ae,[["__scopeId","data-v-2ffcd12b"]]);function ce(e){var c,o;return{id:e.id.toString(),name:e.name,image:(o=(c=e.sprites.other)==null?void 0:c.showdown)==null?void 0:o.front_default,types:e.types.map(d=>d.type.name),stats:e.stats,cries:e.cries,height:e.height,weight:e.weight}}const ne=async()=>{const e=N(),{pokemonTeamData:t,pokemonTeam:c}=V(e),o=j,{data:d,isLoading:u,isError:a,refetch:i}=await E(()=>{const s=c.value.map(_=>G(o,{id:_}));return Promise.all(s)});return P(c,async()=>{await i()},{immediate:!1}),P(()=>d.value,s=>{if(!s)return null;const _=s.map(n=>ce(n));e.setPokemonTeamData(_)},{immediate:!0}),{pokemonTeamData:t,isLoading:u,isError:a,refetch:i}},oe=w({__name:"TeamPage",async setup(e){let t,c;const{pokemonTeam:o,refetch:d}=([t,c]=T(()=>x()),t=await t,c(),t),{pokemonTeamData:u}=([t,c]=T(()=>ne()),t=await t,c(),t);async function a({id:s,name:_}){if(!confirm(`Remove "${_}" from your team?`))return null;const B=o.value.filter(D=>D!==s);await U(B),setTimeout(()=>d(),700)}function i(s){s.value&&s.value.play()}return(s,_)=>(l(),h(q,null,{default:m(()=>[(l(!0),y(C,null,S(A(u),n=>(l(),h(se,{class:"card-team",key:n.id,id:n.id,name:n.name,image:n.image,types:n.types,stats:n.stats,cries:n.cries,onClickSound:i,onClickDelete:a},null,8,["id","name","image","types","stats","cries"]))),128))]),_:1}))}}),re=g(oe,[["__scopeId","data-v-0f0bb9bf"]]);export{re as default};
